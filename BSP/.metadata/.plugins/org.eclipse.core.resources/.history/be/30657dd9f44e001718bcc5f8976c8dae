#include <stdint.h>
#include "slug.h"
#include "utils/uartstdio.h"
void testloadCellAmplifier(void);
void testMotor(void);
void testController(void);

int main(void){

    Clock_set_fastest();

    testController();
}



void testloadCellAmplifier(){
    uint32_t sensorVal;
    float vol;
    initConsole();
    LoadCell_init();
    EnableInterrupts();

    UARTprintf("\n Recording Load cell Sensor: \n");

    while(1){
        sensorVal = getLoadCellValue();
        vol = adc2Vol(sensorVal);
        UARTprintf("Temp Sensor reading is: %04u, vol is: %d\n", sensorVal, (uint32_t)vol);
        delayMS(1);
    }
}

void testMotor(){
    initConsole();
    uint32_t period = 2000; //clock/freq: 20MHz/10KHZ
    Motor_Init(period); // Initialize with 10KHZ

    UARTprintf("\n Test Motor \n");

    while(1){
        enableMotor();
        Motor_SetDuty(.01, period);
        delayMS(1000);
        disableMotor();
        delayMS(1000);
    }

}

void testController(){
    uint32_t flag;
    initConsole();
    //uint32_t period = 2000; //clock/freq: 20MHz/10KHZ
    //Motor_Init(period); // Initialize with 10KHZ

    RGBled_Init(1,1,1);

    Controller_Init();
    EnableInterrupts();
    timerEnable();

    UARTprintf("\n Test Controller \n");

    while(1){

    }

}

